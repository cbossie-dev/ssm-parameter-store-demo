name: Deploy SSM Parameter Store Demo with AppRunner
permissions:
  id-token: write
  contents: read
on: workflow_dispatch
jobs:
  create-ecr-repo-dev:
    name: Create Development Repo
    uses: ./.github/workflows/create-repo.yml
    with:
      environment: Development
  deploy-cdk-dev:
    name: Deploy CDK
    uses: ./.github/workflows/deploy-infra.yml
    needs: create-ecr-repo-dev
    with:
      environment: Development
      repo: ${{ jobs.create-ecr-repo-dev.outputs.reponame }}
  #create-ecr-repo-qa:
  # name: Create QA Repo
  #  uses: ./.github/workflows/create-repo.yml
  #  needs: create-ecr-repo-dev
  #  with:
  #    environment: QA
  #create-ecr-repo-prod:
  #  name: Create Prod Repo
  #  needs: create-ecr-repo-qa
  #  uses: ./.github/workflows/create-repo.yml
  #  with:
  #    environment: Prod        
